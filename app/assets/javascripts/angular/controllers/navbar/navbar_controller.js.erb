app.controller('NavbarCtrl', ['$scope', '$auth', '$location', 'UserServices', function($scope, $auth, $location, UserServices){
  $scope.serviceMessage = UserServices.serviceMessage;
  $scope.user = UserServices.user;

  $scope.logout = function () {
    $auth.signOut().then(function(response) {
      console.log(response);

      //user has logout, set to null
      UserServices.user = null;
      $scope.user = null;
      $scope.authStatus =false;

      $location.path('/')
    }).catch(function(response) {
      console.log(response);
    });
  };

  // check if user is logged in
   $scope.authResponse = []
   $scope.authResponse.push($auth.validateUser())
   $scope.authStatus = $scope.authResponse[0].$$state.status

   console.log($scope.authResponse[0].$$state.value)
   
   if ($scope.authStatus == 2) {
     $scope.loggedIn = false;  
     console.log('you are not signed in');
     console.log($scope.loggedIn);
     console.log($);
   } else {
     $scope.loggedIn = true;
     console.log('you are logged in');
     console.log($scope.loggedIn);
   }

}]);